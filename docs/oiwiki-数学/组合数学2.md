###### 加法 & 乘法原理

加法原理：完成一个工程可以有 $n$ 类办法， 代表第 $a_i(1\le i\le n)$ 类方法的数目。那么完成这件事共有 $s=a_1+a_2+..+a_n$ 种不同的方法。

乘法原理：完成一个工程需要分 $n$ 个步骤， 代表第 $a_i(1\le i\le n)$ 个步骤的不同方法数目。那么完成这件事共有 $s=a_1+a_2+..+a_n$ 种不同的方法。

###### 排列数

从n个不同元素中，任取$m(m\le n)$个元素，按一定顺序排列 的方案数，记$A_n^m$ $A_n^m=n\times(n-1)\times..\times(n-m+1)=\frac{n!}{(n-m)!}$

###### 组合数（二项式系数）

从 n 个不同元素中，任取 $m(m\le n)$ 个元素组成一个集合 的方案数，记$C_n^m 或(\begin{matrix}n\\m\end{matrix})$

$C_n^m=\frac{A_n^m}{m!}=\frac{n!}{(n-m)!\times m!} $

$\binom{n}{m}=\frac{n^{\underline m}}{m!}$

$规定：m\ge n时，C_n^m=0$

$(\begin{matrix}n\\m\end{matrix})+(\begin{matrix}n\\m-1\end{matrix})=(\begin{matrix}n+1\\m\end{matrix})$

$\sum\limits_{i=0}^{n}(\begin{matrix}n\\i\end{matrix})=2^n$

$\binom{n-a}{n-b} = \frac{(n-a)!/(b-a)!}{(n-b)!} = \frac{(n-a)!}{(b-a)!\times(n-b)!}$

$\frac{1}{(b-a)!\times(n-b)!}=\frac{\binom{n-a}{n-b}}{(n-a)!}$

###### 二项式定理

$(a+b)^n=\sum\limits_{i=0}^n(\begin{matrix}n\\m\end{matrix})\times a^{n-i}\times b^i $

扩展（多项式）：$(a_1+a_2+..+a_k)^n=\sum\limits_{满足x_1+x_2+..+x_k=n的非负整数解}(\begin{matrix}n\\x_1x_2..x_k\end{matrix})\times a_1^{x_1}\times a_2^{x_2}\times..\times a_k^{x_k}$

$\sum\limits_{满足x_1+x_2+..+x_k=n的非负整数解}(\begin{matrix}n\\x_1x_2..x_k\end{matrix})=k^n$

**多重集**：包含重复元素的广义集合，记$S=\{n_1\times a_1,~n_2\times a_2,~..,~n_k\times a_k\}$，$\sum\limits_{i=1}^k n_i=n$

###### 多重集的排列数

其全排列数为：$\binom{n}{n_1,n_2,..,n_k}=\frac{n!}{\prod\limits_{i=1}^k n_i!}$

###### 多重集的组合数1

从 多重集S 中选出$r(r\le min\{n_i\}, i\in[1,k])$个元素组成一个 多重集 的方案数为 $\binom{r+k-1}{k-1}$

（相当于$x_i$可以任意取值）

###### 多重集的组合数2

从 多重集S 中选出 $r$个元素组成一个 多重集 的方案数为 

$\sum\limits_{i=1}^k x_i=r,~x_i\le n_i,\forall~i\in[1,~k]$

设$S_i$为$x_i\le n_i$，$\overline{S_i}$为$x_i\ge n_i+1$

$ans=\left|\bigcap\limits_{i=1}^k S_i\right|=\left|U\right|-\left|\bigcup\limits_{i=1}^k \overline S_i\right|$

容斥：$\left|\bigcup\limits_{i=1}^k \overline S_i\right|=\sum\limits_i \left|\overline S_i\right|-\sum\limits_{i,j} \left|\overline S_i\cap \overline S_j\right| + \sum\limits_{i,j, k} \left|\overline S_i\cap \overline S_j \cap \overline S_k\right|-..+(-1)^{k-1}\left| \bigcap\limits_{i=1}^{k}\overline S_i\right|$

$\sum\limits_i \binom{r-(n_i+1)+k-1}{k-1}-\sum\limits_{i,j} \binom{r-((n_i+1) + (n_j+1))+k-1}{k-1} + \sum\limits_{i,j, k} \binom{r-((n_i+1) + (n_j+1) + (n_k+1))+k-1}{k-1}-..+(-1)^{k-1}\binom{r-\sum\limits_{i=1}^k(n_i+1)+k-1}{k-1}$

$ans=\sum\limits_{p=0}^k(-1)^p\times \sum\limits_{A_i}\binom{r-\sum\limits_{e\in A_i}(n_e+1)+k-1}{k-1}$

（Tips：$P$枚举 集合${1..k}$的子集的个数，一个$P$可以对应多个 $A_i$，满足$P=|A_i|$）

（$P=0的情况对应全集的情况$）

###### 不相邻的排列

$1\sim n$这n个正整数中选k个，

###### 错位排列

###### 卡塔兰数

$1, 1, 2, 5, 14, 42, 132, ..（从H_0开始）$

$H_n=H_{n-1}\times \frac{4\times n-2}{n+1}（最核适）$

$H_n=\frac{\binom{2\times n}{n}}{n+1}$

$H_n=\binom{2\times n}{n}-\binom{2\times n}{n-1}$

$H_n=\begin{cases}\sum\limits_{i=1}^n H_{i-1}\times H_{n-i}&n\ge 2,n\in N_+ \\ 1 & n=0, 1\end{cases}$

模型：

1）、有$2n$个人有序进入剧场。入场费$k$元。其中n人只有一张$k$元钞票，另外n人只有一张$2k$元钞票。初始时售票处没钞票，问售票处在可换零钱的情况下的方案数

2）、圆上有$2n$个点，将这些点**成对连接**起来得到 $n$ 条线段不相交的方案数

3）、一个栈进栈序列为$1，2，3，..，n$，出栈序列的所有方案数

4）、$n$个 $+1$ 和 $n$ 个 $-1$ 构成 $2n$ 想 $a_1, a_2, .., a_n$，其部分和 $S_i\ge 0$的方案数

5）、对角线不相交的情况下，将一个凸多边形区域分成三角形区域的方案数

6）、一位大城市的律师在她住所以北 $n$ 个街区和以东 $n$ 个街区处工作。每天她走 $2n$ 个街区去上班。如果他从不穿越（但可以碰到）从家到办公室的对角线，那么有多少条可能的道路？

7）、$n$个结点可构造的二叉树方案数

###### 路径计数问题

$非降路径：只能往两个方向走的路径（如 往下或往右）$

$1，从(0, 0)走到(n, m)的非降路径数=\binom{n+m}{n}$（从解向量中取n个元素作为向下走的解，剩下的m个元素只能是向右走的解）

$2，从(0, 0)走到(n, n)的除端点外不接触直线~y=x~的非降路径数~=~2\times (\binom{2\times n-2}{n-1}-\binom{2\times n-2}{n})$

$3，从(0, 0)到(n, n)的除端点外不穿过直线~y=x~的非降路径数~=~2\times H_n$

###### 第二类斯特林数（斯特林子集数）

$记\begin{Bmatrix}n\\k\end{Bmatrix}，或 S(n, k)$

将n个两两不同的元素，划分为k个互不区分的非空子集的方案数

$\begin{Bmatrix}n\\k\end{Bmatrix} = \begin{Bmatrix}n-1\\k-1\end{Bmatrix}+k\times\begin{Bmatrix}n-1\\k\end{Bmatrix}$

$\begin{Bmatrix}n\\k\end{Bmatrix}=\sum\limits_{i=0}^k\frac{(-1)^{k-i}\times i^n}{i!\times (k-i)!}$

$\begin{Bmatrix}n\\0\end{Bmatrix}=[n=0]$

###### 第一类斯特林数（斯特林轮换数）

将 $k$ 个两两不同的元素，划分为  个互不区分的非空轮换的方案数。

（一个轮换就是一个首尾相接的环形排列）

$\begin{bmatrix}n\\k\end{bmatrix} = \begin{bmatrix}n-1\\k-1\end{bmatrix}+(n-1)\times\begin{bmatrix}n-1\\k\end{bmatrix}$

$\begin{bmatrix}n\\0\end{bmatrix}=[n=0]$

###### 上升幂与普通幂的相互转化

$记上升幂：x^{\over n}=\prod\limits_{i=0}^{n-1}(x+i)$

$x^{\overline n}=\sum\limits_{i}\begin{bmatrix}n\\i\end{bmatrix}\times x^i$

$x^n=\sum\limits_{i}\begin{Bmatrix}n\\i\end{Bmatrix}\times (-1)^{n-i}\times x^{\overline i}$

###### 下降幂与普通幂的相互转化

$记上升幂：x^{\underline n}=\prod\limits_{i=0}^{n-1}(x-i)$

$x^n=\sum\limits_{i}\begin{Bmatrix}n\\i\end{Bmatrix}\times x^{\underline i}$

$x^{\underline n}=\sum\limits_{i}\begin{bmatrix}n\\i\end{bmatrix}\times (-1)^{n-i}\times x^i$

###### 多项式下降阶乘表示 与 多项式点值表示 的关系

$多项式的下降阶乘幂表示：f(x)=\sum\limits_{i=0}^n b_i\times x^{\underline i}$

$多项式的点值表示：(i, a_i), i=0..n$

$两者的关系：$

$a_k=\sum\limits_{i=0}^n b_i\times k^{\underline i}$

$即 a_k=\sum\limits_{i=0}^n b_i\times \frac{k!}{(k-i)!}$

$\frac{a_k}{k!}=\sum\limits_{i=0}^n b_i\times \frac{1}{(k-i)!}$

###### 贝尔数

$1, 1, 2, 5, 15, 52, 203, ..（从B_0开始）$

基数为 $n$ 的集合的划分方法的数目

$B_{n+1}=\sum\limits_{i=0}^n\binom{n}{i}B_i$
